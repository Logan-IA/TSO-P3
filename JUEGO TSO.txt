#!/bin/bash

# --- Configuraci√≥n del Juego ---
PUNTOS=0
PREGUNTAS_TOTALES=8

# Array con las preguntas, respuestas correctas y explicaciones
declare -a PREGUNTAS
declare -a RESPUESTAS
declare -a EXPLICACIONES

# P1: ¬øQu√© comando se usa para buscar texto dentro de un archivo usando patrones (expresiones regulares)?
PREGUNTAS[0]="¬øQu√© comando se usa para buscar texto dentro de un archivo usando patrones (expresiones regulares)?"
RESPUESTAS[0]="grep"
EXPLICACIONES[0]="El comando 'grep' (Global Regular Expression Print) se usa para buscar l√≠neas que coincidan con un patr√≥n."

# P2: ¬øQu√© comando se usa para mostrar las √∫ltimas 10 l√≠neas de un archivo por defecto?"
PREGUNTAS[1]="¬øQu√© comando se usa para mostrar las √∫ltimas 10 l√≠neas de un archivo por defecto?"
RESPUESTAS[1]="tail"
EXPLICACIONES[1]="El comando 'tail' muestra el final de un archivo. Usa 'tail -n N' para mostrar las √∫ltimas N l√≠neas."

# P3: ¬øQu√© comando se usa para ordenar las l√≠neas de un archivo num√©ricamente de mayor a menor?"
PREGUNTAS[2]="¬øQu√© comando se usa para ordenar las l√≠neas de un archivo num√©ricamente de mayor a menor?"
RESPUESTAS[2]="sort -nr"
EXPLICACIONES[2]="La combinaci√≥n 'sort -nr' utiliza el flag '-n' (num√©rico) y '-r' (reversa) para ordenar de mayor a menor."

# P4: ¬øQu√© comando usar√≠as para reemplazar todas las apariciones de la palabra 'antiguo' por 'nuevo' en un archivo?"
PREGUNTAS[3]="¬øQu√© comando usar√≠as para reemplazar todas las apariciones de la palabra 'antiguo' por 'nuevo' en un archivo?"
RESPUESTAS[3]="sed"
EXPLICACIONES[3]="El comando 'sed' (Stream Editor) es perfecto para operaciones de b√∫squeda y reemplazo como 'sed s/antiguo/nuevo/g'."

# P5: ¬øQu√© comando se usa para cambiar los permisos de un archivo o directorio?"
PREGUNTAS[4]="¬øQu√© comando se usa para cambiar los permisos (lectura, escritura, ejecuci√≥n) de un archivo o directorio?"
RESPUESTAS[4]="chmod"
EXPLICACIONES[4]="El comando 'chmod' (Change Mode) modifica los permisos de acceso de archivos y directorios."

# P6: ¬øQu√© comando se usa para imprimir cada campo de un archivo de texto como si fuera una base de datos?"
PREGUNTAS[5]="¬øQu√© comando se usa para imprimir cada campo (columna) de un archivo de texto como si fuera una base de datos?"
RESPUESTAS[5]="awk"
EXPLICACIONES[5]="El comando 'awk' es un lenguaje de programaci√≥n dise√±ado para el procesamiento de archivos de texto basado en patrones y campos (columnas)."

# P7: ¬øQu√© comando elimina l√≠neas duplicadas (repetidas) en un archivo, pero solo si est√°n una al lado de la otra?"
PREGUNTAS[6]="¬øQu√© comando elimina l√≠neas duplicadas (repetidas) en un archivo, pero solo si est√°n una al lado de la otra?"
RESPUESTAS[6]="uniq"
EXPLICACIONES[6]="El comando 'uniq' filtra l√≠neas adyacentes repetidas. Para eliminar duplicados de todo el archivo, primero debes usar 'sort | uniq'."

# P8: ¬øQu√© comando utilizar√≠as para buscar todos los archivos .txt que tengan m√°s de 1MB de tama√±o en el directorio actual y sus subdirectorios?"
PREGUNTAS[7]="¬øQu√© comando utilizar√≠as para buscar archivos espec√≠ficos por criterios (nombre, tama√±o, tiempo) en una jerarqu√≠a de directorios?"
RESPUESTAS[7]="find"
EXPLICACIONES[7]="El comando 'find' es la herramienta est√°ndar para buscar archivos en el sistema de archivos de Linux."

# --- L√≥gica del Juego ---
iniciar_juego() {
    echo "=========================================="
    echo "       üêß BASH COMMAND TRIVIA! üêß"
    echo "  Responde 8 preguntas sobre comandos BASH."
    echo "=========================================="

    for i in $(seq 0 $((PREGUNTAS_TOTALES - 1))); do
        
        echo -e "\n--- Pregunta $((i+1)) de $PREGUNTAS_TOTALES ---"
        echo "${PREGUNTAS[i]}"
        echo -n "Tu respuesta (ej. grep, sed, sort -nr): "
        read RESPUESTA_USUARIO

        # Quitar espacios y convertir a min√∫sculas para una comparaci√≥n m√°s flexible
        RESPUESTA_USUARIO_NORMALIZADA=$(echo "$RESPUESTA_USUARIO" | tr -d ' ' | tr '[:upper:]' '[:lower:]')
        RESPUESTA_CORRECTA_NORMALIZADA=$(echo "${RESPUESTAS[i]}" | tr -d ' ' | tr '[:upper:]' '[:lower:]')

        # Validar la respuesta
        if [ "$RESPUESTA_USUARIO_NORMALIZADA" = "$RESPUESTA_CORRECTA_NORMALIZADA" ]; then
            echo "‚úÖ ¬°Correcto! +1 punto."
            PUNTOS=$((PUNTOS + 1))
        else
            echo "‚ùå ¬°Incorrecto!"
        fi
        
        # Explicaci√≥n
        echo "üí° Respuesta correcta: ${RESPUESTAS[i]}"
        echo "   (Explicaci√≥n: ${EXPLICACIONES[i]})"

    done

    # --- Resultados Finales ---
    echo -e "\n=========================================="
    echo "         üéâ Fin del Juego üéâ"
    echo "=========================================="
    echo "Tu puntaje final es: $PUNTOS de $PREGUNTAS_TOTALES."
    
    if [ $PUNTOS -ge 7 ]; then
        echo "¬°Eres un maestro de BASH! üßë‚Äçüíª"
    elif [ $PUNTOS -ge 4 ]; then
        echo "¬°Buen conocimiento de BASH! Sigue practicando. üí™"
    else
        echo "Necesitas revisar los comandos b√°sicos. ¬°A practicar! üòâ"
    fi
    echo "=========================================="
}

# Iniciar el juego
iniciar_juego